# 🌾 Aglink MVP 開発 タスクリスト v3 (統合・最適化版)

このドキュメントは、Aglink の MVP（Minimum Viable Product）完成に向けた最新のタスクリストです。  
開発初心者メンバーもスムーズに開発を進められるよう、各タスクの詳細な説明と担当者を明確にしました。

## 📋 ブランチ戦略

`main` ブランチから、各自のタスク名のブランチ（例: `feature/create-ui-components`）を作成し、そこで作業を進めましょう。

---

## 🚀 フェーズ1：開発の土台作り（約1週間）

**目標**: 各自が独立して作業を進められるように、アプリの骨格と部品、そしてバックエンドの準備を整える。

### タスク1-1: データベースの設計とセットアップ
- [ ] **担当**: バックエンドリード 兼 PM
- **やること**:
    - Supabase で新しいプロジェクトを作成
    - プロジェクトに必要なテーブルを設計・作成（例: `farms`(農地), `profiles`(ユーザー情報)など）
    - Next.js から Supabase に接続するための設定を実装
    - `.env.example` ファイルを作成・共有
- **触るファイル**:
    - `aglink/src/lib/supabase/client.ts`
    - `aglink/src/lib/supabase/server.ts`
    - `aglink/.env.example`
- > 💡 **ポイント**: プロジェクト全体のデータ構造を決める重要なタスクです。ここが固まると、全員が同じデータ形式を元に開発を進められます。

### タスク1-2: 診断エンジンの設計と型定義
- [ ] **担当**: データスペシャリスト
- **やること**:
    - 農業タイプの定義、質問項目、ポイントシステムを設計
    - 設計に基づき、TypeScript の型定義ファイルを作成 (`aglink/src/types/index.ts`)
    - フロントエンドチーム向けの農地情報ダミーデータを作成 (`aglink/src/data/mock-farms.json`)
- **触るファイル**:
    - `aglink/src/types/index.ts`
    - `aglink/src/data/mock-farms.json`
- > 💡 **ポイント**: バックエンドの最初のステップとして最適です。フロントエンドチームが次に何を作るべきか、このデータがあることで明確になります。

### タスク1-3: shadcn/ui 導入と基本UI部品の準備
- [ ] **担当**: フロントエンド担当1
- **やること**:
    - shadcn/ui をセットアップ
    - アプリ全体で使われる、最小単位の UI 部品を導入・カスタマイズ（Figmaデザイン参考）
- **触るファイル**:
    - `aglink/src/components/ui/button.tsx`
    - `aglink/src/components/ui/card.tsx`
    - `aglink/src/components/ui/input.tsx`
    - `aglink/src/components/ui/label.tsx` など
- > 💡 **ポイント**: React コンポーネント作成の基本（Props の受け渡し、スタイリングなど）を学ぶのに最適なタスクです。

### タスク1-4: 共通レイアウトコンポーネントの作成
- [ ] **担当**: フロントエンド担当2
- **やること**:
    - 全てのページで共通して表示されるヘッダーとフッターを作成
    - 作成したコンポーネントをメイン機能の共通レイアウトに配置
- **触るファイル**:
    - `aglink/src/components/ui/Header.tsx`
    - `aglink/src/components/ui/Footer.tsx`
    - `aglink/src/app/(main)/layout.tsx`
- > 💡 **ポイント**: Next.js の `layout.tsx` の役割を理解するための重要なタスクです。

### タスク1-5: 認証フォームの静的実装
- [ ] **担当**: フロントエンド担当3
- **やること**:
    - ログインとサインアップで共通して使える、メールアドレスとパスワード入力欄を持つフォームの「見た目」を作成
- **触るファイル**:
    - `aglink/src/components/domain/auth/AuthForm.tsx`
- > 💡 **ポイント**: この段階では、まだ実際のログイン処理は実装しません。`input` や `button` を配置して、フォームのレイアウトを整えることに集中してください。

---

## 🎨 フェーズ2：静的な画面の組み立て（約1週間）

**目標**: フェーズ1で作成した部品とモックデータを使い、各ページの見た目を完成させる。この段階では、まだ動的な機能は実装しない。

### タスク2-1: 認証ページの組み立て
- [ ] **担当**: フロントエンド担当1
- **やること**:
    - フェーズ1で作成した `AuthForm.tsx` を、ログインページとサインアップページに配置し、レイアウトを調整
- **触るファイル**:
    - `aglink/src/app/(auth)/login/page.tsx`
    - `aglink/src/app/(auth)/signup/page.tsx`

### タスク2-2: 診断ページの静的実装
- [ ] **担当**: フロントエンド担当2
- **やること**:
    - データスペシャリストが設計した質問リストを元に、診断の質問と選択肢ボタンを画面に表示するフォームを作成・配置
- **触るファイル**:
    - `aglink/src/app/(main)/diagnosis/page.tsx`
    - `aglink/src/components/domain/diagnosis/DiagnosisForm.tsx`
- > 💡 **ポイント**: Button コンポーネントを再利用して、質問リストを画面に並べる練習です。

### タスク2-3: 診断結果・農地一覧ページの静的実装
- [ ] **担当**: フロントエンド担当3
- **やること**:
    - モックデータ（`mock-farms.json`）を読み込み、`map` メソッドを使って農地カードの一覧を画面に表示
- **触るファイル**:
    - `aglink/src/app/(main)/diagnosis/result/page.tsx`
    - `aglink/src/components/domain/farms/FarmList.tsx`
- > 💡 **ポイント**: データを元に繰り返し要素を表示する、React の最も基本的なパターンを学べます。

### タスク2-4: 診断ロジックの実装
- [ ] **担当**: データスペシャリスト
- **やること**:
    - 設計に基づき、ユーザーの回答（ポイント）から最終的な診断結果を算出する純粋な計算ロジック（関数）を実装
- **触るファイル**:
    - `aglink/src/lib/utils.ts` など
- > 💡 **ポイント**: データベースに依存しない、純粋なプログラミングロジックの実装に集中できます。

---

## ⚡ フェーズ3：動的な機能の実装（約1〜2週間）

**目標**: 組み立てた画面に命を吹き込む。ユーザーの操作に応じて画面が変化したり、データベースと連携したりする機能を実装する。

### タスク3-1: 認証機能のフロントエンド実装
- [ ] **担当**: フロントエンド担当1
- **やること**:
    - `AuthForm.tsx` で、ユーザーが入力した値を `useState` で管理
    - フォームが送信されたら、バックエンド担当が作成した Server Actions（ログイン/サインアップ関数）を呼び出す
- **触るファイル**:
    - `aglink/src/components/domain/auth/AuthForm.tsx`
- > 💡 **ポイント**: フロントエンドとバックエンドが連携する最初のタスクです。

### タスク3-2: 農業スタイル診断機能の実装
- [ ] **担当**: フロントエンド担当2
- **やること**:
    - `DiagnosisForm.tsx` で、ユーザーの回答を `useState` を使って管理
    - 回答に応じて次の質問に進むロジックを実装
    - 最終的な回答が揃ったら、診断ロジックを呼び出し、診断結果を算出
- **触るファイル**:
    - `aglink/src/components/domain/diagnosis/DiagnosisForm.tsx`
- > 💡 **ポイント**: React の `useState` を使った状態管理の、実践的な第一歩です。

### タスク3-3: 診断結果のデータ連携
- [ ] **担当**: フロントエンド担当3
- **やること**:
    - これまでモックデータを使っていた診断結果ページを、Supabase から直接データを取得して表示するように書き換える
- **触るファイル**:
    - `aglink/src/app/(main)/diagnosis/result/page.tsx`
- > 💡 **ポイント**: アプリが「本物のデータ」で動き出す感動を共有できます！

### タスク3-4: 認証機能のバックエンド実装
- [ ] **担当**: バックエンドリード 兼 PM
- **やること**:
    - Supabase Auth を使い、サインアップとログインの処理を Server Actions として実装
- **触るファイル**:
    - `aglink/src/lib/actions.ts` (新規作成)
- > 💡 **ポイント**: セキュリティに関わる重要な部分です。Server Actions の仕組みをチームに共有する良い機会にもなります。

### タスク3-5: 診断結果の保存・表示（バックエンド）
- [ ] **担当**: バックエンドリード 兼 PM & データスペシャリスト
- **やること**:
    - 診断完了時に Supabase へ結果を保存する Server Action を実装
    - 結果ページで表示するためのデータを取得する関数を実装
- **触るファイル**:
    - `aglink/src/lib/actions.ts`
    - `aglink/src/lib/supabase/data.ts`（新規作成または追記）

---

## ✅ MVP完成の定義

以下の**全ての機能**が、Supabase の本物のデータと連携して動作する状態を目指します。

| 機能 | 説明 | 状況 |
|:---|:---|:---:|
| 🔐 **ユーザー認証** | ユーザーが新規登録・ログインできる | [ ] |
| 🔍 **農業スタイル診断** | ユーザーが農業スタイル診断を受けられる | [ ] |
| 💾 **診断結果の保存** | 診断結果がユーザーアカウントに紐づいて保存される | [ ] |
| 📋 **おすすめ農地表示** | 保存された診断結果と、それに基づいた農地一覧が表示される | [ ] |

> 🎉 **全機能が完成したら MVP達成です！**

---

## 🌟 Post-MVP（追加機能）

MVP 開発完了後、以下の機能の実装を検討します。

- **ブックマーク機能**:
  - 気に入った農地を保存できる機能。
  - まずは農地詳細ページにブックマークボタンを設置するところから着手予定。
- **マイページ機能**:
  - プロフィール編集や、ブックマークした農地の一覧を表示するページ。
- **農地詳細ページの動的表示**:
  - 現在は静的な `result` ページに一覧表示しているが、個別の農地詳細ページ (`/farms/[id]`) をデータベースと連携させる。
