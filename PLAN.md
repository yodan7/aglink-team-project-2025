# Aglink 開発計画

# たたき台作製までの計画

## 1. 開発環境の構築

### 1-1. Docker 環境のセットアップ

Docker を使い、チーム全員が同じ環境で開発できるようにします。セットアップと基本的な操作方法は、リポジトリのルートにある README.md を参照してください。

> 注意点: 初回はビルドに時間がかかりますが、次回以降は `docker-compose up` だけで起動できます。

### 1-2. 理想的なフォルダ構成

プロジェクトの規模が大きくなっても管理しやすくなるよう、役割ごとにフォルダを分けます。開発を進める際は、この構成に従ってファイルを作成・配置してください。

```
aglink-team-project-2025/    # Gitリポジトリのルート
├── aglink/                  # Next.jsアプリケーション本体
│   ├── public/              # 画像、フォントなどの静的ファイル
│   ├── src/
│   │   ├── app/               # ① ページの本体 (URLと連動)
│   │   ├── components/          # ② 再利用可能なUIコンポーネント
│   │   ├── hooks/               # ③ 再利用可能なカスタムフック
│   │   ├── lib/                 # ④ 外部サービス連携や共通ロジック
│   │   ├── data/                # ⑤ モックデータ
│   │   └── types/               # ⑥ TypeScriptの型定義
│   ├── .env.local             # SupabaseのAPIキーなどを保管
│   ├── Dockerfile
│   └── package.json
├── docker-compose.yaml
└── README.md
```
### 各フォルダの役割:

- `src/app/`: アプリケーションのURLと各ページの内容を定義します。フォルダ構造がそのままURLになります。（例: `app/diagnosis/page.tsx` → `/diagnosis`）

- `src/components/`: 複数のページで再利用するUI部品を格納します。

  - `ui/`: ボタンやカードなど、見た目だけの最小単位の部品。

  - `domain/`: 診断フォームや農地リストなど、特定の機能に関連する部品。

- `src/hooks/`: UIからロジックを分離するためのカスタムフックを格納します。（ただし、Supabase連携など、より最適な代替手段がある場合はそちらを優先します）

- `src/lib/`: Supabaseとの接続設定や、Server Actionsなど、外部連携や共通ロジックを置く場所です。

- `src/data/`: 開発初期に使うダミーデータ（農地情報など）を置きます。

- `src/types/`: `Farm`（農地）や`User`（ユーザー）など、プロジェクトで使うデータ構造の型を定義します。


## 2. たたき台プロジェクトの作成(MVP)

プログラミングに自信がないメンバーがすぐに取り組めるよう、静的な UI とモックデータを組み込んだプロジェクトを準備します。

### 2-1. 共通UIコンポーネントの実装
まず、すべてのページで使われるUI部品から作成します。

- `src/components/ui/Button.tsx`: ラベルやクリックイベントを受け取るボタン。

- `src/components/ui/Card.tsx`: 画像やタイトル、説明文を表示するカード。

- `src/components/ui/Header.tsx`: 全ページ共通のヘッダー。

- `src/components/ui/Footer.tsx`: 全ページ共通のフッター。

### 2-2. モックデータの作成
- `src/data/mock-farms.json`に、農地情報のダミーデータを作成します。これにより、Supabase（バックエンド）が未完成でもフロントエンド開発を進められます。

### 2-3. 静的ページの作成
- 診断画面 (`src/app/diagnosis/page.tsx`):
共通UIコンポーネントを使って質問や選択肢ボタンを配置します。この段階では、まだ動的な機能は実装しません。

- 診断結果・農地一覧画面 (`src/app/diagnosis/result/page.tsx`):
`src/data/mock-farms.json`のモックデータを読み込んで、`map`メソッドでカードのリストを表示できるようにします。


## 3. 機能実装フェーズ（動的機能の追加）

たたき台プロジェクトをベースに、段階的に機能を実装します。

### 3-1. 農業スタイル診断機能
- `useState`の活用: `src/components/domain/diagnosis/DiagnosisForm.tsx`コンポーネント内で、ユーザーの回答を`useState`で管理し、回答に応じて次の質問に進むロジックを実装します。

### 3-2. 動的なデータ表示（Supabase連携）
- 診断結果に応じて、`lib/supabase/server.ts` を使ってSupabaseから農地データを取得し、一覧画面の表示を動的に更新します。

### 3-3. ブックマーク機能
- Server Actionsの活用: `src/lib/actions.ts`にブックマークを追加/削除する関数を作成します。`src/components/domain/farms/BookmarkButton.tsx`からその関数を呼び出し、データベースの状態を更新します。


## **5. さらなる改善のために検討すべきこと（新規追加項目）**

既存の計画をさらに強固なものにするため、チームで以下の項目について話し合い、方針を決定することを推奨します。

- **5-1. 状態管理の方針決定**
  - **現状**: `useState`を活用し、コンポーネント内の状態を管理します 。
  - **検討事項**: ユーザーの診断結果など、複数のページやコンポーネントで共有したいデータが出てきた場合に備え、React 標準の**Context API**や、より手軽なライブラリである**Zustand**などの導入を検討します。これにより、コードの複雑化を防ぎます。
- **5-2. スタイリングの効率化**
  - **現状**: `globals.css`や`tailwind.config.js`を元にスタイリングを行います 。
  - **検討事項**: 開発速度をさらに向上させるため、Tailwind CSS をベースにした UI コンポーネントライブラリ**「shadcn/ui」**の導入を検討します。これにより、デザイン性とアクセシビリティが考慮された UI 部品を効率的に実装できます。
- **5-3. コード品質の自動化**
  - **現状**: 各自がコーディングを行います。
  - **検討事項**: チーム全体のコードの品質とスタイルを統一するため、以下のツール導入を検討します。
    - **ESLint**: コードの文法エラーや潜在的なバグを自動で検出します。
    - **Prettier**: コードのフォーマット（インデントや改行など）を自動で整形します。
    - **Husky**: Git へのコミット時に、上記ツールを自動実行させ、品質の低いコードの混入を未然に防ぎます。
- **5-4. Git ブランチ戦略の策定**
  - **現状**: バージョン管理に Git を利用します 。
  - **検討事項**: 複数人での開発をスムーズに進めるため、**「GitHub Flow」**などのブランチ戦略を定めます。例えば、「`main`ブランチは常に正常な状態を保ち、機能追加は必ず別のブランチ（例： `feature/diagnosis-page`）で行い、レビュー後に`main`に統合する」といったルールをチームで共有します。
